(this["webpackJsonptom-stuart-project-five"]=this["webpackJsonptom-stuart-project-five"]||[]).push([[0],{14:function(e,t,a){e.exports=a.p+"static/media/nigel-tadyanehondo-pXf4OH65OhE-unsplash.a1bc7900.jpg"},15:function(e,t,a){e.exports=a(26)},20:function(e,t,a){},21:function(e,t,a){},26:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),r=a(13),i=a.n(r),o=(a(20),a(7)),l=a(1),c=a(2),m=a(4),u=a(3),h=a(5),p=(a(21),a(8)),g=a.n(p);a(23);g.a.initializeApp({apiKey:"AIzaSyAaI71MTS1gfeFk6RwBoLFf_eTTknSHlkw",authDomain:"chat-app-52f62.firebaseapp.com",databaseURL:"https://chat-app-52f62.firebaseio.com",projectId:"chat-app-52f62",storageBucket:"chat-app-52f62.appspot.com",messagingSenderId:"762254551362",appId:"1:762254551362:web:b3a0fa8d06c325962380db"});var d=g.a,f=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"messageInput"},n.a.createElement("form",{onSubmit:this.props.submitStore,className:"messageInputForm"},n.a.createElement("label",{htmlFor:"userMessage"}),n.a.createElement("input",{autocomplete:"off",id:"userMessage",type:"text",placeholder:"Your Message",value:this.props.userInput,className:"userMessage",onChange:this.props.trackChanges}),n.a.createElement("button",{onChange:this.props.trackChanges,type:"submit"},"Go")))}}]),t}(s.Component),b=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"totalMessages",id:this.props.hidden},n.a.createElement("div",null,n.a.createElement("p",null,n.a.createElement("span",{className:"date"},this.props.sendDate)),n.a.createElement("p",null,n.a.createElement("span",{className:"messageID"},this.props.userID),":",n.a.createElement("span",{className:"messageText"},this.props.userMessage),n.a.createElement("span",{className:"deleteYou",id:this.props.firebaseKey,onClick:this.props.cancelMessage},n.a.createElement("span",{className:this.props.userID,id:this.props.firebaseKey},"x")))))}}]),t}(s.Component),v=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"page2"},n.a.createElement("nav",null,n.a.createElement("section",{className:"wrapper "},n.a.createElement("div",null,n.a.createElement("li",{className:"logo logo-landing"}," ",n.a.createElement("a",{href:"index.html"},"Chattr",n.a.createElement("span",{className:"accent"},"-3"))," "),n.a.createElement("li",{onClick:this.props.goBackToStart},this.props.userName," sign out ")))),n.a.createElement("section",{className:"wrapper"},n.a.createElement("h2",null,"Channel: ",this.props.statusChat),n.a.createElement(f,{userInput:this.props.userInput,trackChanges:this.props.handleChange,submitStore:this.props.handleSubmit}),n.a.createElement("div",{className:"messagesBox"},n.a.createElement("div",null,this.props.messageList.map((function(t){return n.a.createElement(b,{userID:t.userID,userMessage:t.userMessage,hidden:e.props.hideClassName,sendDate:t.currentTime,cancelMessage:e.props.removeMessage,firebaseKey:t.userFirebaseKey})})),n.a.createElement("div",{className:"lastMessage"}))),n.a.createElement("button",{className:"clear",onClick:this.props.changeHideState},"Be Private - Hide & UnHide chat just for me")))}}]),t}(s.Component),S=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"signInForm"},n.a.createElement("label",{htmlFor:this.props.className}),n.a.createElement("input",{autoComplete:"off",id:this.props.className,type:"text",placeholder:this.props.inputField,className:this.props.className,onChange:this.props.handleChange}))}}]),t}(s.Component),N=a(14),E=a.n(N),C=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"landingPage"},n.a.createElement("div",{className:"landingPageTop"},n.a.createElement("nav",null,n.a.createElement("section",{className:"wrapper "},n.a.createElement("div",null,n.a.createElement("li",{className:"logo logo-landing"}," ",n.a.createElement("a",{href:"index.html"},"Chattr"),n.a.createElement("a",{href:"https://tomstuart123.github.io/chat-test/"},n.a.createElement("span",{className:"accent"},"-3"))," "),n.a.createElement("li",{onClick:this.props.scrollDown},this.props.signOrLogin)))),n.a.createElement("section",{className:"wrapper "},n.a.createElement("h1",null," Virtual Chat for work, chill or play"),n.a.createElement("form",{className:"publicRoomInputForm",onSubmit:this.props.publicJoin},n.a.createElement(S,{inputField:"Add name to trial as guest",className:"publicJoin",handleChange:this.props.handleChange}),n.a.createElement("button",{type:"submit",className:"submitPublic"},"Go to the Public Room")),n.a.createElement("div",{className:"scrollDownHolder"},n.a.createElement("button",{className:"scrollDown",onClick:this.props.scrollDown},"Sign up to Pro below")))),n.a.createElement("div",{className:"landingPageBottom"},n.a.createElement("section",{className:"wrapper "},n.a.createElement("h2",null," ",this.props.signOrLogin," to create and join your own private channels"),n.a.createElement("form",{className:"signInForm",onSubmit:this.props.signUpOrLogin},n.a.createElement("p",null,"Add a UserName"),n.a.createElement(S,{inputField:"Name",className:"signInName",handleChange:this.props.handleChange}),n.a.createElement("p",null,"Add your Random Key"),n.a.createElement(S,{inputField:"Random key",className:"signInRandomKey",handleChange:this.props.handleChange}),n.a.createElement("button",{type:"submit",className:this.props.signOrLogin},this.props.signOrLogin)),n.a.createElement("button",{className:"switchSign",onClick:this.props.switchSign},"Already done this? Switch to Login page"),n.a.createElement("div",{className:"imageContainer"},n.a.createElement("img",{src:E.a,alt:"sign saying how th e user will sign up eventually"})))))}}]),t}(s.Component),y=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"roomPage"},n.a.createElement("nav",null,n.a.createElement("section",{className:"wrapper "},n.a.createElement("div",null,n.a.createElement("li",{className:"logo logo-landing"}," ",n.a.createElement("a",{href:"index.html"},"Chattr",n.a.createElement("span",{className:"accent"},"-3"))," "),n.a.createElement("li",{onClick:this.props.goBackToStart},"Sign Out of ",this.props.userName)))),n.a.createElement("div",null,n.a.createElement("section",{className:"wrapper "},n.a.createElement("h1",null,"Hi ",this.props.userName,"! You're all signed in so lets get your private room set up!"),n.a.createElement("div",{className:"roomPageForms"},n.a.createElement("form",{className:"createRoomInputForm",onSubmit:this.props.createRoom},n.a.createElement("h3",null,"Create a new chat room"),n.a.createElement(S,{inputField:"Name for the new room",className:"createRoom",handleChange:this.props.handleChange}),n.a.createElement("button",{type:"submit",className:"submitRoom"},"Create")),n.a.createElement("form",{className:"joinRoomInputForm",onSubmit:this.props.joinRoom},n.a.createElement("h3",null,"Join an existing chat room"),n.a.createElement(S,{inputField:"Existing room name",className:"joinRoom",handleChange:this.props.handleChange}),n.a.createElement("button",{type:"submit",className:"submitJoin"},"Join"))))))}}]),t}(s.Component),I=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(m.a)(this,Object(u.a)(t).call(this))).componentDidMount=function(){},e.switchSign=function(){"Sign up"===e.state.switchSign?e.setState({switchSign:"Login"}):e.setState({switchSign:"Sign up"})},e.signUpOrLogin=function(t){t.preventDefault();var a=e.state.userInput,s=e.state.userInput2;"Sign up"===e.state.switchSign?e.signUp(a,s):"Login"===e.state.switchSign&&e.login(a,s)},e.signUp=function(t,a){var s=d.database().ref("users"),n=Date(Date.now()).toString(),r={userID:t,userPW:a,signUpTime:n};s.on("value",(function(s){var n=s.val();for(var r in n)n[r].userID==t&&n[r].userPW.toString()==a&&e.setState({stop:!0})})),setTimeout((function(){if(a&&t)if(!0===e.state.stop)alert("sorry someone already has that key with that user name. Try again."),e.setState({stop:!1});else if(!0===e.state.userSignedIn)alert("Already signed in I am afraid");else{var n=s.push(r);r.userFirebaseKey=n.key,s.child(n.key).update(r),e.setState({userName:t,userPW:a,userSignedIn:!0,userInput:""})}else alert("please fill both sign in fields")}),300)},e.login=function(t,a){!0!==e.state.userSignedIn?d.database().ref("users").on("value",(function(s){var n=s.val(),r=[];for(var i in n)n[i].userID===t&&n[i].userPW.toString()===a&&(e.setState({userName:t,userPW:a,userSignedIn:!0,userInput:""}),r.push("match"));0===r.length&&alert("sorry, no username and ID matches those. Try again")})):alert("Already signed in. sign out when you can")},e.adjustPublicJoinStatus=function(t){t.preventDefault();var a=e.state.userInput;e.setState({publicJoin:!0,userInput:""}),e.groupChatStart(a)},e.scrollDown=function(e){e.preventDefault(),window.scrollBy(0,1e3)},e.groupChatStart=function(t){var a=t,s=Math.floor(100*Math.random());a+=s,d.database().ref("chatrooms").on("value",(function(t){var s=t.val()[e.state.roomName],n=[];for(var r in s)n.push(s[r]);e.setState({messageList:n,userName:a});var i=document.querySelector(".lastMessage");setTimeout((function(){i.scrollIntoView()}),100)}))},e.handleChange=function(t){"signInName"===t.target.className?e.setState({userInput:t.target.value}):"signInRandomKey"===t.target.className?e.setState({userInput2:t.target.value}):e.setState({userInput:t.target.value})},e.handleSubmit=function(t){t.preventDefault();var a=d.database().ref("chatrooms"),s=e.state.userInput,n=Date(Date.now()).toString(),r={userID:e.state.userName,userMessage:s,currentTime:n,userFirebaseKey:""};if(s){var i=a.child(e.state.roomName).push(r);r.userFirebaseKey=i.key,a.child(e.state.roomName).child(i.key).update(r),e.setState({userInput:"",currentTime:"",userFirebaseKey:""})}},e.changeHideState=function(t){e.setState({hideClass:!e.state.hideClass}),e.hideChat()},e.hideChat=function(){!0===e.state.hideClass?e.setState({hideClassName:"hide"}):e.setState({hideClassName:""})},e.removeChat=function(t){var a=d.database().ref("chatrooms");window.confirm("Are you sure you want to delete the chat for all participants?")&&a.child(e.state.roomName).set({0:{userID:"Chattr Bot",userMessage:"Start chat below"}})},e.removeMessage=function(t){var a=d.database().ref("chatrooms");e.state.userName===t.target.className?a.child(e.state.roomName).child(t.target.id).remove():alert("You can only delete your own messages")},e.goBackToStart=function(t){t.preventDefault(),e.setState({clicked:!1,messageList:[],userInput:"",userInput2:"",userName:"Tom",userPW:"",hideClass:!0,hideClassName:"",currentTime:"",userFirebaseKey:"",publicJoin:!1,privateJoin:!1,privateCreate:!1,switchSign:"Sign up",stop:!1,userSignedIn:!1,roomName:"publicRoom"})},e.createRoom=function(t){t.preventDefault();var a=e.state.userInput,s=d.database().ref("chatrooms");s.on("value",(function(t){var s=t.val();for(var n in s)n.toString()==a.toString()&&e.setState({stop:!0})})),setTimeout((function(){if(""===a)alert("please fill a room name");else if(!0===e.state.stop)alert("sorry someone already has that room name. Try again."),e.setState({stop:!1});else{var t=Object(o.a)({},a,Object(o.a)({},"0",{userID:"Chattr Bot",userMessage:"Start chat below"}));s.update(t),e.setState({roomName:a,userInput:"",privateCreate:!0});var n=e.state.userName;e.groupChatStart(n)}}),300)},e.joinRoom=function(t){t.preventDefault();var a=e.state.userInput;d.database().ref("chatrooms").on("value",(function(t){var s=t.val(),n=[];for(var r in s)r.toString()==a.toString()?n.push("match"):console.log(n);console.log(n),n.length>0?e.setState({stop:!1}):e.setState({stop:!0}),console.log(n)})),setTimeout((function(){if(console.log(e.state.stop),""===a)alert("please fill a room name");else if(!1===e.state.stop){e.setState({roomName:a,userInput:"",privateJoin:!0});var t=e.state.userName;e.groupChatStart(t)}else alert("sorry there are no room names with that title. Try again.")}),500)},e.state={clicked:!1,messageList:[],userInput:"",userInput2:"",userName:"guest",userPW:"",hideClass:!0,hideClassName:"",currentTime:"",userFirebaseKey:"",publicJoin:!1,privateJoin:!1,privateCreate:!1,switchSign:"Sign up",stop:!1,userSignedIn:!1,roomName:"publicRoom"},e}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"App"},this.state.publicJoin?n.a.createElement(v,{statusChat:this.state.roomName,userInput:this.state.userInput,handleChange:this.handleChange,handleSubmit:this.handleSubmit,messageList:this.state.messageList,hideClassName:this.state.hideClassName,removeMessage:this.removeMessage,changeHideState:this.changeHideState,removeChat:this.removeChat,goBackToStart:this.goBackToStart}):this.state.userSignedIn?this.state.privateCreate?n.a.createElement(v,{userName:this.state.userName,statusChat:this.state.roomName,userInput:this.state.userInput,handleChange:this.handleChange,handleSubmit:this.handleSubmit,messageList:this.state.messageList,hideClassName:this.state.hideClassName,removeMessage:this.removeMessage,changeHideState:this.changeHideState,removeChat:this.removeChat,goBackToStart:this.goBackToStart}):this.state.privateJoin?n.a.createElement(v,{userName:this.state.userName,statusChat:this.state.roomName,userInput:this.state.userInput,handleChange:this.handleChange,handleSubmit:this.handleSubmit,messageList:this.state.messageList,hideClassName:this.state.hideClassName,removeMessage:this.removeMessage,changeHideState:this.changeHideState,removeChat:this.removeChat,goBackToStart:this.goBackToStart}):n.a.createElement(y,{goBackToStart:this.goBackToStart,handleChange:this.handleChange,createRoom:this.createRoom,joinRoom:this.joinRoom,userName:this.state.userName}):n.a.createElement(C,{publicJoin:this.adjustPublicJoinStatus,handleChange:this.handleChange,signUpOrLogin:this.signUpOrLogin,switchSign:this.switchSign,signOrLogin:this.state.switchSign,scrollDown:this.scrollDown}))}}]),t}(s.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(n.a.createElement(I,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[15,1,2]]]);
//# sourceMappingURL=main.01257b21.chunk.js.map